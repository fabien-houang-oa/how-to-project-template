[
  {
    "name": "40_bq-load",
    "config_regex": "^gs://btdp-gcs-csv1-eu-scm/extract_[0-9]{14}[.]csv",
    "action_type": "bq_load",
    "bq_load_params": {
      "dataset": "${app_name_short}_ds_999_csv1_${multiregion}_${project_env}_tmp",
      "table": "csv1_v1",
      "schema": "[{\"name\":\"DATA_FILE_PROVIDER\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"ORIGINAL_DATA_SOURCE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"LOREAL_MARKET_FLAG\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"VALUE_TYPE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"COUNTRY_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CHANNEL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_SHIPPING_CHANNEL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"SHIPPING_CHANNEL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"RETAILER\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"POS_UNIVERSAL_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_POS_OR_WEBSITE_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_POS_OR_WEBSITE_NAME\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_POS_ZIPCODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_POS_CITY\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_POS_REGION\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_POS_HOUSE_NUMBER_AND_STREET\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_WEBSITE_URL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_1\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_2\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_3\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_4\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_5\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_6\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_7\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_8\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_9\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKET_HIERARCHY_LEVEL_10\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"MANUFACTURER\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_1\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_2\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_3\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_4\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_5\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_6\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_7\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_8\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_9\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BRAND_HIERARCHY_LEVEL_10\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"BRAND_UNIVERSE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EAN_UPC_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EAN_UPC_LABEL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_PRODUCT_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_PRODUCT_LOWEST_LABEL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MARKETING_PRODUCT_LABEL\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_MATERIAL_TYPE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"MATERIAL_GROUP\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_BOM_HEADER_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"GALENIC\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"GENDER\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"MAKE_UP_EFFECT\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"BENEFIT\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"SKIN_TYPE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"HAIR_TYPE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"SKIN_CONDITION\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"HAIR_CONDITION\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EU_SIZE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"US_SIZE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_INGREDIENTS_LIST\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"PERIOD\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"PERIOD_START_DATE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"PERIOD_END_DATE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_DATE_1\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_DATE_2\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_DATE_3\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_PROMOTION_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_PROMOTION_DESCRIPTION\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_PROMOTION_START_DATE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_PROMOTION_END_DATE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_STOCK_TYPE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"STOCK_TYPE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CURRENCY_CODE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"TAX_INCLUDED\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"SOLD_QUANTITY_IN_UNITS\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"SOLD_AMOUNT_IN_LOCAL_CURRENCY\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"THIRD_PARTY_SALES_IN_UNITS\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"THIRD_PARTY_SALES_IN_LOCAL_CURRENCY\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"PROMO_SALES_IN_UNITS\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"PROMO_SALES_IN_LOCAL_CURRENCY\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_1\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_2\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_3\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_4\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_5\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_6\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_7\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_8\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_9\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"CUSTOM_KPI_10\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"STOCK_POSITION_IN_UNITS\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"STOCK_POSITION_IN_LOCAL_CURRENCY\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"FILE_CREATION_DATE\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"},{\"name\":\"EXTERNAL_FILE_ID\",\"type\":\"STRING\",\"mode\":\"NULLABLE\"}]",
      "file_type": "csv",
      "csv_options": {
        "count_lines": true,
        "skip_lines": 0,
        "delimiter": ";",
        "quotechar": "\""
      }
    }
  },
  {
    "name": "50_sql-transfo",
    "config_regex": "^bq://test_btdp_ds_999_csv1_eu_scm_csv1_v1_load0$",
    "action_type": "sql_transfo",
    "next_step_id": "test_btdp_ds_999_csv1_eu_scm_csv1_v1_end",
    "sql_transformation_params": {
      "project": "${project}",
      "dataset": "${app_name_short}_ds_999_csv1_${multiregion}_${project_env}_tmp",
      "table": "csv1_v1",
      "sql": "SELECT *, CURRENT_TIMESTAMP() AS insertion_time, '{execution_id}' AS execution_id, '{file_name}' AS source_file_name FROM {project}.{load_dataset}.{load_table}",
      "job_priority": "interactive"
    }
  },
  {
    "name": "99_end",
    "config_regex": "^bq://test_btdp_ds_999_csv1_eu_scm_csv1_v1_end$",
    "action_type": "end"
  }
]
